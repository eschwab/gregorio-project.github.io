<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!--
  Gregorio web site.
  Copyright (C) 2007-2015 The Gregorio project

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->
  <title>Gregorio project website</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="description" content="Free software for typesetting Gregorian chant" lang="en">
  <meta name="keywords" content="Gregorian chant, gregorio, gabc, gregoriotex" lang="en">
  <meta name="author" content="The Gregorio project">
  <link rel="shortcut icon" href="./illus/fav.ico">
  <link rel="icon" href="./illus/fav.ico">
  <link rel="stylesheet" href="./style.css" type="text/css" title="default">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="./gregorio-menu.js"></script>
  <script>
    var context = 'gregorio';
    var title = 'Gregorio project website'
  </script>
</head>

<body>
  <div id="ban">
    <img src="./illus/harpedroite.png" title="" class="hd" alt="" />
    <a id="haut" name="haut"></a>
    <div id="banniere">
    </div>
  </div>
  <script>write_gre_menu();</script>
  <div class="flux">
    &nbsp;
    <!-- IE patch-->
    <div class="text">
      <!-- End of header -->
<!-- header -->

<h1>Installing Gregorio under Mac OSX</h1>

<h2>The <span class="tex">T<span class="epsilon">e</span>X</span> distribution</h2>

<p>The first step to make Gregorio work is to have a <span class="tex">T<span class="epsilon">e</span>X</span> distribution: Mac<span class="tex">T<span class="epsilon">e</span>X</span> (or <span class="tex">T<span class="epsilon">e</span>X</span>Live for Mac). See the <a href="http://tug.org/mactex/">official site</a> for instructions.</p>

<p>While we recommend that you get a complete <span class="tex">T<span class="epsilon">e</span>X</span>Live (Mac<span class="tex">T<span class="epsilon">e</span>X</span> itself, not Basic<span class="tex">T<span class="epsilon">e</span>X</span>) installation since it will provide you with the most flexibility going forward, we understand that not everyone has the disk space or time to install the roughly 4.5GB of material that this requires.  If you are trying to maintain a slimmer installation (Basic<span class="tex">T<span class="epsilon">e</span>X</span>), you will need to ensure that you have the following packages installed: xcolor, kvoptions, ifluatex, graphicx, luatexbase, luaotfload, luamplib, and xstring.  Most of these packages should come with the Lua<span class="tex">T<span class="epsilon">e</span>X</span> engine, but at least xcolor and xstring are not.  Additionally, Gregorio is included in Mac<span class="tex">T<span class="epsilon">e</span>X</span> (from 2016 on), so if you install it, you only need to proceed with the following instructions if you want a more recent version of Gregoiro than which shipped with Mac<span class="tex">T<span class="epsilon">e</span>X</span.</p>

<h2>New Users</h2>

<p>If you are new to using Gregorio and <span class="tex">T<span class="epsilon">e</span>X</span>, then installing the current version of Mac<span class="tex">T<span class="epsilon">e</span>X</span> is all you need to do.  The remaining instructions are meant for more advanced users who are looking to install an intermediate update (i.e. one which occurs between the annual releases of <span class="tex">T<span class="epsilon">e</span>X</span>Live) or the development version of the Gregorio.</p>

<h2>The installer</h2>

<p>An installer has been created for some Mac systems. It is available from the <a href="https://github.com/gregorio-project/gregorio/releases/latest">download page</a>, and is meant for systems running OS X versions 10.5 or later.</p>

<p>The installer will automatically place the command-line tool in your path and will add the Gregorio<span class="tex">T<span class="epsilon">e</span>X</span> files to your texmf tree.  It will also create a directory at <code>/Users/Shared/Gregorio</code> containing the documentation, examples, and contributed add-ons.</p>

<h2>Compiling from sources</h2>

<h3>Development environment installation</h3>

<p>To be able to compile Gregorio, you must first install an installation environment. Here are the main guidelines:</p>

<ol>
<li>download XCode (free) from the Apple Mac App Store</li>
<li>lauch it, it will ask you to agree to the terms of use, agree to them</li>
<li>open TERMINAL and do <code>xcode-select --install</code> to install the command line tools</li>
<li>download and install <a href="http://www.macports.org/">MacPorts</a> (free)</li>
<li>once installed, in the TERMINAL, do <code>sudo port selfupdate</code> to get the latest sources packages</li>
<li>do <code>sudo port install libtool autoconf automake flex bison py-pygments</code>.</li>
<li>For gregorio versions prior to 4.0, if you are using <span style="font-family: monospace;">--enable-xml-read</span> then this additional dependency is needed: <code>sudo port install libxml2</code>.</li>
<li>Because the versions of git and bash which ship with OSX are not the most recent, you may also want to consider adding the following two packages: <code>sudo port install bash git</code>  If you are planning on helping with development, then the bash upgrade is required.</li>
</ol>

<p>Once all this is done, you should be able to compile Gregorio.</p>

<p>If you want to compile fonts (to modify them, or when building directly from git), do <code>sudo port install fontforge</code>.</p>

<p>If you intend to aid in development, then there are a couple of more packages which will come in handy: <code>sudo port install python27 ImageMagick coreutils</code>

<!-- May 2016 - not needed, but keeping in case this changes again
<p>Finally, the version of flex that is currently (as of September 2015) available in MacPorts (2.5.37) is not the most current version (2.5.39).  While at last test this version still enabled a successful compilation of Gregorio, the development team uses the current version and does not test for backwards compatibility regularly.  If you want to use the more recent version of flex to ensure compatibility, then follow the following steps:</p>

<ol>
<li>install <a href="http://brew.sh/">Homebrew</a></li>
<li>open TERMINAL and do <code>brew update</code> to make sure you have the latest version</li>
<li>in TERMINAL do <code>brew install flex</code></li>
<li>since Homebrew doesn't add its version of flex to the PATH, you need to do so manually.  To do this for a parituclar TERMINAL session do <code>export PATH=/usr/local/opt/flex/bin/:$PATH</code>.  If you prefer to do this more permently you will need to modify your bash profile.  Instructions for doing so can be found using a Google search.</li>
</ol>
-->

<h3>Source downloading</h3>

<p>You have a choice between versions of Gregorio. To obtain the sources of the stable version, you just need to download the sources from the <a href="https://github.com/gregorio-project/gregorio/releases">download page</a>, and decompress the archive.  Previous versions and current beta or release candidates are also available on this page.</p>

<p><b>Nota bene:</b> There are two different source code files on the download page: gregorio-x.x.x.tar.bz2 (where x.x.x is the version number) and "Source Code" (in both zip and tar.gz format).  "gregorio-x.x.x.tar.bz2" is a special distribution version of the source which has several files, which do not depend on your particular system's architecture, pre-built for you.  As a result, it requires fewer tools to build, and should be the default choice for most people.  The file named "Source Code" is an image of the repository at the time of the release which is added automatically by GitHub.  As a result, the process for building from this file is identical to the process for building from a clone of the repository itself (see below).</p>

<p>To get the git version, that is, the version in development (more functionalities, but might contain more bugs), you will have to create a local copy of the git repository of the project, with the command:</p>

<div class="commandline">
<code>$ git clone --depth 1 -b develop https://github.com/gregorio-project/gregorio.git gregorio-git</code>
</div>

<p>The above command minimizes the size of the download by not grabing the complete history of the repository.  If you plan on helping with development, however, that complete history is essential and you should use the following command instead:</p>

<div class="commandline">
<code>$ git clone https://github.com/gregorio-project/gregorio.git gregorio-git</code>
</div>

<p>Once cloned, you'll be on the master branch of the repository (latest stable release) and can use the normal git commands to navigate and explore the repository (for instance, you might want to checkout the develop branch before compilation).</p>

<h3>Compilation</h3>

<p>Once the sources are downloaded, open a TERMINAL window and navigate to the directory containing the source files.  Once there, carry out the following commands:</p>

<div class="commandline">
<code>$ ./build.sh --arch=x86_64</code><br/>
<code>$ sudo ./install.sh</code><br/>
</div>

<p><b>Nota bene:</b> For versions of Gregorio prior to 4.0, you may want to add the following flags to <code>build.sh</code>: <code> --enable-all-static --disable-shared --enable-static-ltdl</code>.  They will reduce the number of files installed on your machine by making the command line tool self contained, rather than using linked libraries.</p>

<h3>Alternate Installation Locations</h3>

<p>By default the automatic installation process will install gregorio in <code>/usr/local/</code> and Gregorio<span class="tex">T<span class="epsilon">e</span>X</span> into they system-wide texmf-local.  If you wish to change these destinations, then you can add arguments to the build and install instructions to that effect:</p>

<div class="commandline">
    <code>./build.sh --arch=x86_64 --prefix=/path/to/custom/root</code><br/>
    <code>sudo ./install.sh dir:/path/to/custom/texmf</code>
</div>

<p><b>Note:</b> Due to a bug in the current release (v2.7-fix-3) of <code>luaotfload</code> the documentation cannot be built against TeXLive 2016 (see <a href="https://github.com/gregorio-project/gregorio/issues/1188">#1188</a>).  As a result, building from a clone of the repository will fail against that version.  A work around for this bug exists (<a href="https://github.com/henryso/gregorio/commit/9fe9139178dce6adebffbae65016800748450b61">9fe9139</a>), but using it breaks compilation under TeXLive 2015 and the bug has been fixed in the latest master for <code>luaotfload</code>.  The result is that users should do one of the following:</p>

<ul>
<li>Install using the Mac installer (recommended for those installing a stable release).</li>
<li>Switch to TeXLive 2015 to build the docs.</li>
<li>Upgrade your <code>luaotfload</code> to a more recent version (v2.8-rc1 or later).</li>
</ul>




<h3>Update</h3>

<p>To update your git version, you just need to go into the directory containing the source files (assuming you kept it), run <code>git pull</code> and recompile with the same instructions as the previous <em>Compilation</em> section.  If you deleted that directory after install, then just repeat the steps above starting at the <code>git clone</code> command.</p>

<h3>Next steps</h3>

<p>It can be very helpful to <a href="./configuration-texshop.html">configure <span class="tex">T<span class="epsilon">e</span>X</span>Shop for Gregorio</a>. Once you have done so, refer to the <a href="./introduction-editor.html">introduction page</a> to start using Gregorio !</p>

<!-- footer -->
    </div>
    <div class="bottom">
    </div>
    <script>initialize_menu();</script>
  </body>
</html>
